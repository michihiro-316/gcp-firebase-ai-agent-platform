<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>03 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬ - GCP AI Agent Platform å­¦ç¿’ã‚¬ã‚¤ãƒ‰</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“š</text></svg>">
</head>
<body>
  <header class="header">
    <a href="index.html" class="header-logo">
      <span>ğŸ“š</span>
      <span>GCP AI Agent å­¦ç¿’ã‚¬ã‚¤ãƒ‰</span>
    </a>
    <nav class="header-nav">
      <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
      <a href="FLOW_03_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æµã‚Œ.html">ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</a>
      <a href="https://github.com" target="_blank">GitHub</a>
    </nav>
    <button class="menu-toggle" onclick="toggleSidebar()">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </header>

  <div class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">ğŸš€ ã¯ã˜ã‚ã«</div>
        <ul class="sidebar-nav">
          <li><a href="00_ã¯ã˜ã‚ã«èª­ã‚“ã§ãã ã•ã„.html" >ã¯ã˜ã‚ã«èª­ã‚“ã§ãã ã•ã„</a></li>
          <li><a href="04_å‹•ã‹ã—ã¦ã¿ã‚ˆã†.html" >å‹•ã‹ã—ã¦ã¿ã‚ˆã†</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">ğŸ“– åŸºç¤çŸ¥è­˜</div>
        <ul class="sidebar-nav">
          <li><a href="01_å…¨ä½“åƒ.html" >å…¨ä½“åƒ</a></li>
          <li><a href="02_ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è§£èª¬.html" >ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è§£èª¬</a></li>
          <li><a href="03_ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬.html" class="active">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">ğŸ”„ ãƒ•ãƒ­ãƒ¼è§£èª¬</div>
        <ul class="sidebar-nav">
          <li><a href="FLOW_01_ãƒãƒ£ãƒƒãƒˆé€ä¿¡ã®æµã‚Œ.html" >ãƒãƒ£ãƒƒãƒˆé€ä¿¡ã®æµã‚Œ</a></li>
          <li><a href="FLOW_02_ãƒ­ã‚°ã‚¤ãƒ³ã®æµã‚Œ.html" >ãƒ­ã‚°ã‚¤ãƒ³ã®æµã‚Œ</a></li>
          <li><a href="FLOW_03_ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æµã‚Œ.html" >ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æµã‚Œ</a></li>
          <li><a href="FLOW_04_ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®æµã‚Œ.html" >ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®æµã‚Œ</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">ğŸ”§ ä¸Šç´šç·¨</div>
        <ul class="sidebar-nav">
          <li><a href="05_é¡§å®¢ç®¡ç†ã®ä»•çµ„ã¿.html" >é¡§å®¢ç®¡ç†ã®ä»•çµ„ã¿</a></li>
          <li><a href="08_AIã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º.html" >AIã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">ğŸ“š ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</div>
        <ul class="sidebar-nav">
          <li><a href="06_ã‚³ãƒãƒ³ãƒ‰è§£èª¬.html" >ã‚³ãƒãƒ³ãƒ‰è§£èª¬</a></li>
          <li><a href="07_ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«.html" >ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨è¨­å®š</a></li>
        </ul>
      </div>
    </aside>

    <main class="main">
      <article class="content">
        <h1 id="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬<a class="header-link" href="#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è§£èª¬" title="Permanent link">&para;</a></h1>
<p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆç”»é¢å´ï¼‰ã®ã‚³ãƒ¼ãƒ‰ã‚’è§£èª¬ã—ã¾ã™ã€‚</p>
<hr />
<h2 id="ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“">ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“<a class="header-link" href="#ä½¿ã£ã¦ã„ã‚‹æŠ€è¡“" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>æŠ€è¡“</th>
<th>å½¹å‰²</th>
</tr>
</thead>
<tbody>
<tr>
<td>React</td>
<td>UIã‚’ä½œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</td>
</tr>
<tr>
<td>TypeScript</td>
<td>å‹ã®ã‚ã‚‹JavaScript</td>
</tr>
<tr>
<td>Vite</td>
<td>é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ»ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«</td>
</tr>
<tr>
<td>Firebase SDK</td>
<td>Firebaseé€£æº</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ">ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ<a class="header-link" href="#ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="nx">frontend</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span>
<span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">App</span><span class="p">.</span><span class="nx">tsx</span><span class="w">           </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒ¡ã‚¤ãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</span>
<span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">main</span><span class="p">.</span><span class="nx">tsx</span><span class="w">          </span><span class="err">â†</span><span class="w"> </span><span class="nx">ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ</span>
<span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">hooks</span><span class="o">/</span><span class="w">            </span><span class="err">â†</span><span class="w"> </span><span class="nx">ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">useAuth</span><span class="p">.</span><span class="nx">ts</span><span class="w">    </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">useChat</span><span class="p">.</span><span class="nx">ts</span><span class="w">    </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒãƒ£ãƒƒãƒˆå‡¦ç†</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€</span><span class="w"> </span><span class="nx">useRenderer</span><span class="p">.</span><span class="nx">ts</span><span class="w"> </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼è¨­å®šèª­ã¿è¾¼ã¿</span>
<span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">services</span><span class="o">/</span><span class="w">         </span><span class="err">â†</span><span class="w"> </span><span class="nx">å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">firebase</span><span class="p">.</span><span class="nx">ts</span><span class="w">   </span><span class="err">â†</span><span class="w"> </span><span class="nx">FirebaseåˆæœŸåŒ–</span>
<span class="err">â”‚</span><span class="w">   </span><span class="err">â””â”€â”€</span><span class="w"> </span><span class="kn">api</span><span class="p">.</span><span class="nx">ts</span><span class="w">        </span><span class="err">â†</span><span class="w"> </span><span class="nx">APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</span>
<span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">components</span><span class="o">/</span><span class="w">       </span><span class="err">â†</span><span class="w"> </span><span class="nx">UIãƒ‘ãƒ¼ãƒ„</span>
<span class="err">â””â”€â”€</span><span class="w"> </span><span class="nx">renderers</span><span class="o">/</span><span class="w">        </span><span class="err">â†</span><span class="w"> </span><span class="err">ã€</span><span class="nx">ä¸Šç´šè€…å‘ã‘</span><span class="err">ã€‘</span><span class="nx">ãƒãƒ£ãƒƒãƒˆè¡¨ç¤ºã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</span>
<span class="w">    </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">types</span><span class="p">.</span><span class="nx">ts</span><span class="w">      </span><span class="err">â†</span><span class="w"> </span><span class="nx">å‹å®šç¾©</span>
<span class="w">    </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="nx">index</span><span class="p">.</span><span class="nx">ts</span><span class="w">      </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼é¸æŠ</span>
<span class="w">    </span><span class="err">â”œâ”€â”€</span><span class="w"> </span><span class="k">default</span><span class="o">/</span><span class="w">      </span><span class="err">â†</span><span class="w"> </span><span class="nx">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼</span>
<span class="w">    </span><span class="err">â””â”€â”€</span><span class="w"> </span><span class="nx">_examples</span><span class="o">/</span><span class="w">    </span><span class="err">â†</span><span class="w"> </span><span class="nx">ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…</span>
</code></pre></div>

<blockquote>
<p><strong>ğŸ’¡ åˆå­¦è€…ã¸</strong>: <code>renderers/</code> ãƒ•ã‚©ãƒ«ãƒ€ã¯ä¸Šç´šè€…å‘ã‘ã§ã™ã€‚<br />
æœ€åˆã®å­¦ç¿’ã§ã¯<strong>ã‚¹ã‚­ãƒƒãƒ—ã—ã¦OK</strong>ã§ã™ã€‚<br />
ã¾ãšã¯ <code>App.tsx</code> ã¨ <code>hooks/</code> ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚</p>
</blockquote>
<hr />
<h2 id="é‡è¦ãªæ¦‚å¿µ">é‡è¦ãªæ¦‚å¿µ<a class="header-link" href="#é‡è¦ãªæ¦‚å¿µ" title="Permanent link">&para;</a></h2>
<h3 id="1-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã¯">1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã¯ï¼Ÿ<a class="header-link" href="#1-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã¯" title="Permanent link">&para;</a></h3>
<p>ç”»é¢ã®ãƒ‘ãƒ¼ãƒ„ã€‚ãƒ¬ã‚´ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚ˆã†ãªã‚‚ã®ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">MyButton</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">ã‚¯ãƒªãƒƒã‚¯</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="c1">// ä½¿ã†å´</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">MyButton</span><span class="w"> </span><span class="p">/&gt;</span><span class="w">  </span><span class="p">{</span><span class="cm">/* â† ã“ã“ã§ä½¿ã† */</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="2-usestate-ã¨ã¯">2. useState ã¨ã¯ï¼Ÿ<a class="header-link" href="#2-usestate-ã¨ã¯" title="Permanent link">&para;</a></h3>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã€ŒçŠ¶æ…‹ã€ã‚’æŒã¤ãŸã‚ã®ä»•çµ„ã¿ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Counter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// count ã¨ã„ã†çŠ¶æ…‹ã‚’ä½œã‚‹ï¼ˆåˆæœŸå€¤ 0ï¼‰</span>
<span class="w">  </span><span class="c1">// setCount ã§å€¤ã‚’å¤‰æ›´ã§ãã‚‹</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">ã‚«ã‚¦ãƒ³ãƒˆ</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">count</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}&gt;</span>
<span class="w">        </span><span class="o">+</span><span class="mf">1</span>
<span class="w">      </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-useeffect-ã¨ã¯">3. useEffect ã¨ã¯ï¼Ÿ<a class="header-link" href="#3-useeffect-ã¨ã¯" title="Permanent link">&para;</a></h3>
<p>ã€Œå‰¯ä½œç”¨ã€ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚<br />
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã€æ›´æ–°ã•ã‚ŒãŸã¨ãã«å‡¦ç†ã‚’å®Ÿè¡Œã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">UserProfile</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">setUser</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fetchUser</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setUser</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span><span class="w">  </span><span class="c1">// [] ã¯ã€Œæœ€åˆã®1å›ã ã‘å®Ÿè¡Œã€ã®æ„å‘³</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;{</span><span class="nx">user</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="4-ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã¯">4. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã¯ï¼Ÿ<a class="header-link" href="#4-ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã¯" title="Permanent link">&para;</a></h3>
<p><code>use</code> ã§å§‹ã¾ã‚‹é–¢æ•°ã€‚ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// useAuth.ts - ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’ã¾ã¨ã‚ãŸã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">useAuth</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">setUser</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">loading</span><span class="p">,</span><span class="w"> </span><span class="nx">setLoading</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">logout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">loading</span><span class="p">,</span><span class="w"> </span><span class="nx">login</span><span class="p">,</span><span class="w"> </span><span class="nx">logout</span><span class="w"> </span><span class="p">};</span>
<span class="p">}</span>

<span class="c1">// ä½¿ã†å´</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">login</span><span class="p">,</span><span class="w"> </span><span class="nx">logout</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useAuth</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®æµã‚Œ">ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®æµã‚Œ<a class="header-link" href="#ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®æµã‚Œ" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="c1">// useAuth.ts ã®æ¦‚è¦</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">useAuth</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 1. çŠ¶æ…‹ã‚’å®šç¾©</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">setUser</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 2. Firebase Authã®çŠ¶æ…‹å¤‰åŒ–ã‚’ç›£è¦–</span>
<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ãŸã¨ãã«å‘¼ã°ã‚Œã‚‹</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">unsubscribe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">onAuthStateChanged</span><span class="p">(</span><span class="nx">auth</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">firebaseUser</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">setUser</span><span class="p">(</span><span class="nx">firebaseUser</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">unsubscribe</span><span class="p">();</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="w">  </span><span class="c1">// 3. ãƒ­ã‚°ã‚¤ãƒ³é–¢æ•°</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">GoogleAuthProvider</span><span class="p">();</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">signInWithPopup</span><span class="p">(</span><span class="nx">auth</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// â†’ æˆåŠŸã™ã‚‹ã¨ onAuthStateChanged ãŒå‘¼ã°ã‚Œã‚‹</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="ãƒãƒ£ãƒƒãƒˆå‡¦ç†ã®æµã‚Œ">ãƒãƒ£ãƒƒãƒˆå‡¦ç†ã®æµã‚Œ<a class="header-link" href="#ãƒãƒ£ãƒƒãƒˆå‡¦ç†ã®æµã‚Œ" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code><span class="c1">// useChat.ts ã®æ¦‚è¦</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">useChat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">messages</span><span class="p">,</span><span class="w"> </span><span class="nx">setMessages</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([]);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useAuth</span><span class="p">();</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sendMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">text</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. IDãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">getIdToken</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 2. APIã‚’å‘¼ã³å‡ºã—ï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/chat&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="kt">JSON.stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="kt">text</span><span class="w"> </span><span class="p">}),</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// 3. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã§å—ã‘å–ã‚‹</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getReader</span><span class="p">();</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">done</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">chunk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">TextDecoder</span><span class="p">().</span><span class="nx">decode</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// ... ç”»é¢ã«è¡¨ç¤º</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">messages</span><span class="p">,</span><span class="w"> </span><span class="nx">sendMessage</span><span class="w"> </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2 id="server-sent-events-sse-ã¨ã¯">Server-Sent Events (SSE) ã¨ã¯ï¼Ÿ<a class="header-link" href="#server-sent-events-sse-ã¨ã¯" title="Permanent link">&para;</a></h2>
<p>ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã€Œå°‘ã—ãšã¤ã€ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ä»•çµ„ã¿ã€‚</p>
<div class="codehilite"><pre><span></span><code>ã€æ™®é€šã®APIã€‘
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ï¼ˆ3ç§’ï¼‰â†’ å…¨éƒ¨ã¾ã¨ã‚ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹

ã€SSEã€‘
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ ã€Œã“ã‚“ã€â†’ã€Œã«ã¡ã€â†’ã€Œã¯ã€â†’ã€Œï¼ã€â†’ å®Œäº†

ãƒãƒ£ãƒƒãƒˆã®è¿”ç­”ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼
</code></pre></div>

<hr />
<h2 id="typescript-ã®å‹">TypeScript ã®å‹<a class="header-link" href="#typescript-ã®å‹" title="Permanent link">&para;</a></h2>
<p>TypeScriptã§ã¯ã€Œå‹ã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚<br />
é–“é•ã„ã‚’äº‹å‰ã«é˜²ã’ã¾ã™ã€‚</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// å‹ã‚’å®šç¾©</span>
<span class="kr">type</span><span class="w"> </span><span class="nx">Message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">sender</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;assistant&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// ä½¿ã†</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">messages</span><span class="o">:</span><span class="w"> </span><span class="kt">Message</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="c1">// â†“ ã“ã‚Œã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ï¼ˆå‹ãŒé•ã†ï¼‰</span>
<span class="c1">// messages.push({ text: 123 });  // text ã¯ string ã®ã¯ãšï¼</span>
</code></pre></div>

<hr />
<h2 id="æ¬¡ã«èª­ã‚€ã¹ã">æ¬¡ã«èª­ã‚€ã¹ã<a class="header-link" href="#æ¬¡ã«èª­ã‚€ã¹ã" title="Permanent link">&para;</a></h2>
<ol>
<li><code>frontend/src/App.tsx</code> - å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰</li>
<li><code>frontend/src/hooks/useAuth.ts</code> - ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†</li>
<li><code>learning/04_å‹•ã‹ã—ã¦ã¿ã‚ˆã†.md</code> - å®Ÿéš›ã«å‹•ã‹ã™</li>
</ol>
      </article>
      <footer class="footer">
        GCP AI Agent Platform å­¦ç¿’ã‚¬ã‚¤ãƒ‰ | Built with Python & Markdown
      </footer>
    </main>
  </div>

  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(e) {
      const sidebar = document.getElementById('sidebar');
      const toggle = document.querySelector('.menu-toggle');
      if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
        sidebar.classList.remove('open');
      }
    });
  </script>
</body>
</html>