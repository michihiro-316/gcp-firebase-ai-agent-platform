<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>06 コマンド解説 - GCP AI Agent 設計資料</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📚</text></svg>">
</head>
<body>
  <header class="header">
    <a href="index.html" class="header-logo">
      <span>📚</span>
      <span>GCP AI Agent 設計資料</span>
    </a>
    <nav class="header-nav">
      <a href="index.html">ホーム</a>
      <a href="02_全体像.html">全体像</a>
      <a href="https://github.com" target="_blank">GitHub</a>
    </nav>
    <button class="menu-toggle" onclick="toggleSidebar()">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </header>

  <div class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">📖 はじめに</div>
        <ul class="sidebar-nav">
          <li><a href="01_はじめに読んでください.html" >はじめに読んでください</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">🏗️ 仕組みを理解</div>
        <ul class="sidebar-nav">
          <li><a href="02_全体像.html" >全体像</a></li>
          <li><a href="03_バックエンド解説.html" >バックエンド解説</a></li>
          <li><a href="04_フロントエンド解説.html" >フロントエンド解説</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">🛠️ セットアップ</div>
        <ul class="sidebar-nav">
          <li><a href="05_セットアップの流れ.html" >セットアップの流れ</a></li>
          <li><a href="06_コマンド解説.html" class="active">コマンド解説</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">🚀 動かす</div>
        <ul class="sidebar-nav">
          <li><a href="07_動かしてみよう.html" >動かしてみよう</a></li>
          <li><a href="08_AIカスタマイズ.html" >AIカスタマイズ</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">🔧 上級編</div>
        <ul class="sidebar-nav">
          <li><a href="10_Gatewayアーキテクチャ.html" >Gatewayアーキテクチャ</a></li>
          <li><a href="14_セキュリティとファイル連携.html" >セキュリティとファイル連携</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">🔄 参考: フロー解説</div>
        <ul class="sidebar-nav">
          <li><a href="11_チャット送信の流れ.html" >チャット送信の流れ</a></li>
          <li><a href="12_ログインの流れ.html" >ログインの流れ</a></li>
          <li><a href="13_セッション管理の流れ.html" >セッション管理の流れ</a></li>
        </ul>
      </div>
    </aside>

    <main class="main">
      <article class="content">
        <h1 id="コマンド解説">コマンド解説<a class="header-link" href="#コマンド解説" title="Permanent link">&para;</a></h1>
<p>「黒い画面（ターミナル）」で使うコマンドを解説します。<br />
魔法のように見えますが、一つ一つ意味があります。</p>
<hr />
<h2 id="-ワンコマンド起動推奨">🚀 ワンコマンド起動（推奨）<a class="header-link" href="#-ワンコマンド起動推奨" title="Permanent link">&para;</a></h2>
<p>本プロジェクトでは、複雑なコマンドを1つにまとめた起動スクリプトを用意しています。</p>
<pre class="codehilite"><code class="language-bash">./start.sh
</code></pre>

<p><strong>これだけで以下が自動実行されます：</strong></p>
<table>
<thead>
<tr>
<th>ステップ</th>
<th>内容</th>
<th>詳細</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>バックエンド起動</td>
<td><code>python -m functions_framework --target=main --port=8080</code></td>
</tr>
<tr>
<td>2</td>
<td>フロントエンド起動</td>
<td><code>npm run dev</code></td>
</tr>
<tr>
<td>3</td>
<td>接続確認</td>
<td>ヘルスチェック</td>
</tr>
</tbody>
</table>
<h3 id="startsh-の中身を理解する">start.sh の中身を理解する<a class="header-link" href="#startsh-の中身を理解する" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash"># Step 1: バックエンド起動
python -m functions_framework --target=main --port=8080 &amp;
#   └── python -m: Pythonモジュールとして実行
#   └── functions_framework: Cloud Functionsローカル実行ツール
#   └── --target=main: backend/src/main.py の main関数を実行
#   └── --port=8080: ポート8080で待ち受け
#   └── &amp;: バックグラウンドで実行

# Step 2: フロントエンド起動
npm run dev &amp;
#   └── npm run: package.jsonのscriptsを実行
#   └── dev: 開発サーバー（Vite）を起動
#   └── &amp;: バックグラウンドで実行
</code></pre>

<h3 id="起動後のシステム構成">起動後のシステム構成<a class="header-link" href="#起動後のシステム構成" title="Permanent link">&para;</a></h3>
<div class="architecture-box">
<h3>🖥️ ローカル開発環境</h3>
<pre>
┌─────────────────────────────────────────────────────────────────┐
│                        あなたのPC                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [ブラウザ]                                                      │
│  http://localhost:5173                                          │
│       │                                                         │
│       │ HTTPリクエスト                                           │
│       ▼                                                         │
│  ┌─────────────────┐         ┌─────────────────┐               │
│  │  フロントエンド   │ ──API→ │  バックエンド    │               │
│  │  (React/Vite)   │         │  (Python/Flask) │               │
│  │  :5173          │         │  :8080          │               │
│  └─────────────────┘         └────────┬────────┘               │
│                                       │                         │
│                                       │ Vertex AI API           │
│                                       ▼                         │
│                              ┌─────────────────┐               │
│                              │  Google Cloud    │               │
│                              │  (Gemini AI)     │               │
│                              └─────────────────┘               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
</pre>
</div>

<hr />
<h2 id="-デプロイコマンド">📦 デプロイコマンド<a class="header-link" href="#-デプロイコマンド" title="Permanent link">&para;</a></h2>
<h3 id="顧客別デプロイ">顧客別デプロイ<a class="header-link" href="#顧客別デプロイ" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">./infrastructure/deploy-customer.sh &lt;customer-id&gt;
</code></pre>

<p><strong>例:</strong></p>
<pre class="codehilite"><code class="language-bash">./infrastructure/deploy-customer.sh acme-corp
</code></pre>

<h3 id="deploy-customersh-の中身を理解する">deploy-customer.sh の中身を理解する<a class="header-link" href="#deploy-customersh-の中身を理解する" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash"># 1. バックエンドをCloud Functionsにデプロイ
gcloud functions deploy ${CUSTOMER_ID}-chat-api \
  --runtime python311 \              # Python 3.11を使用
  --trigger-http \                   # HTTPリクエストで起動
  --entry-point main \               # main関数を実行
  --set-env-vars CUSTOMER_ID=${CUSTOMER_ID}  # 環境変数設定

# 2. フロントエンドをビルド
npm run build                        # dist/ フォルダに出力

# 3. Firebase Hostingにデプロイ
firebase deploy --only hosting       # dist/ をアップロード
</code></pre>

<h3 id="デプロイ後の構成">デプロイ後の構成<a class="header-link" href="#デプロイ後の構成" title="Permanent link">&para;</a></h3>
<div class="architecture-box">
<h3>☁️ Google Cloud Platform</h3>
<pre>
┌─────────────────────────────────────────────────────────────────┐
│                    Google Cloud Platform                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [ユーザーのブラウザ]                                             │
│       │                                                         │
│       ▼                                                         │
│  ┌─────────────────┐         ┌─────────────────┐               │
│  │ Firebase Hosting │ ──API→ │ Cloud Functions │               │
│  │ (静的ファイル)   │         │ (Python)        │               │
│  │ your-app.web.app│         │ /chat エンドポ  │               │
│  └─────────────────┘         └────────┬────────┘               │
│                                       │                         │
│       ┌───────────────────────────────┼───────────────────┐     │
│       │                               │                   │     │
│       ▼                               ▼                   ▼     │
│  ┌──────────┐                  ┌──────────┐        ┌──────────┐│
│  │ Firestore │                  │ Vertex AI│        │ Firebase ││
│  │ (データ)  │                  │ (AI)     │        │ Auth     ││
│  └──────────┘                  └──────────┘        └──────────┘│
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
</pre>
</div>

<hr />
<h2 id="基本ターミナルとは">基本：ターミナルとは？<a class="header-link" href="#基本ターミナルとは" title="Permanent link">&para;</a></h2>
<pre class="codehilite"><code>ターミナル = コンピュータに文字で命令を出す画面

マウスでクリック → GUI（グラフィカル）
文字で命令       → CLI（コマンドライン）
</code></pre>

<p>プログラマーはCLIをよく使います。速いからです。</p>
<hr />
<h2 id="-シェルスクリプトshとは">📄 シェルスクリプト（.sh）とは？<a class="header-link" href="#-シェルスクリプトshとは" title="Permanent link">&para;</a></h2>
<h3 id="一言で説明">一言で説明<a class="header-link" href="#一言で説明" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code>.shファイル = 複数のコマンドをまとめた「レシピ」
</code></pre>

<h3 id="何が嬉しいの">何が嬉しいの？<a class="header-link" href="#何が嬉しいの" title="Permanent link">&para;</a></h3>
<div class="tip-box">
<h3>💡 シェルスクリプトのメリット</h3>
<p><strong>【.shファイルがない場合】</strong><br>
毎回これを打つ必要がある：</p>
<pre>
$ cd backend
$ pip install -r requirements.txt
$ python -m functions_framework --target=main --port=8080 &
$ cd ../frontend
$ npm install
$ npm run dev
</pre>
<p><strong>【.shファイルがある場合】</strong><br>
これだけでOK：</p>
<pre>$ ./start.sh</pre>
</div>

<h3 id="実行方法">実行方法<a class="header-link" href="#実行方法" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash"># 方法1: ./ファイル名
./start.sh

# 方法2: bash ファイル名
bash start.sh

# 方法3: sh ファイル名
sh start.sh
</code></pre>

<h3 id="の意味">「./」の意味<a class="header-link" href="#の意味" title="Permanent link">&para;</a></h3>
<div class="info-box">
<h3>📝 「./」の意味</h3>
<pre>
./start.sh
 │└── start.sh というファイル
 └── 「今いるフォルダの」という意味
</pre>
<p>「./」がないと、コンピュータは「システムにインストールされたコマンド」を探しに行く<br>
「./」をつけると「今いるフォルダにあるファイル」を実行する</p>
</div>

<h3 id="shファイルの中身">.shファイルの中身<a class="header-link" href="#shファイルの中身" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">#!/bin/bash           ← 「このファイルはbashで実行してね」という宣言

echo &quot;Hello&quot;          ← コマンド1
cd backend            ← コマンド2
pip install ...       ← コマンド3

# 上から順番に実行される
</code></pre>

<h3 id="本プロジェクトのshファイル一覧">本プロジェクトの.shファイル一覧<a class="header-link" href="#本プロジェクトのshファイル一覧" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ファイル</th>
<th>場所</th>
<th>役割</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start.sh</code></td>
<td>プロジェクト直下</td>
<td>開発環境を1コマンドで起動</td>
</tr>
<tr>
<td><code>deploy.sh</code></td>
<td>プロジェクト直下</td>
<td>本番環境に1コマンドでデプロイ</td>
</tr>
<tr>
<td><code>deploy-customer.sh</code></td>
<td>infrastructure/</td>
<td>顧客別デプロイ</td>
</tr>
</tbody>
</table>
<h3 id="イメージ">イメージ<a class="header-link" href="#イメージ" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code>.shファイル = 料理のレシピ

【レシピがない場合】
1. 卵を割る
2. 塩を入れる
3. かき混ぜる
4. フライパンで焼く
...を毎回思い出しながら作る

【レシピがある場合】
「卵焼きのレシピ.sh」を見れば誰でも同じように作れる
しかも「./卵焼きのレシピ.sh」で自動で作ってくれる！
</code></pre>

<hr />
<h2 id="-顧客管理コマンド">👥 顧客管理コマンド<a class="header-link" href="#-顧客管理コマンド" title="Permanent link">&para;</a></h2>
<p>顧客（会社）とユーザーを管理するコマンドです。<br />
<strong>backend/scripts/manage_customer.py</strong> を使います。</p>
<h3 id="実行方法_1">実行方法<a class="header-link" href="#実行方法_1" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">cd backend
python scripts/manage_customer.py &lt;コマンド&gt; [引数...]
</code></pre>

<h3 id="コマンド一覧">コマンド一覧<a class="header-link" href="#コマンド一覧" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>コマンド</th>
<th>役割</th>
<th>使用例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>顧客一覧を表示</td>
<td><code>python scripts/manage_customer.py list</code></td>
</tr>
<tr>
<td><code>add</code></td>
<td>顧客を作成</td>
<td><code>python scripts/manage_customer.py add acme-corp "株式会社ACME"</code></td>
</tr>
<tr>
<td><code>show</code></td>
<td>顧客の詳細表示</td>
<td><code>python scripts/manage_customer.py show acme-corp</code></td>
</tr>
<tr>
<td><code>show-user</code></td>
<td>ユーザーの詳細表示</td>
<td><code>python scripts/manage_customer.py show-user yamada@acme.co.jp</code></td>
</tr>
<tr>
<td><code>add-domain</code></td>
<td>メールドメイン（@以降）を追加</td>
<td><code>python scripts/manage_customer.py add-domain acme-corp acme.co.jp</code></td>
</tr>
<tr>
<td><code>add-email</code></td>
<td>メールを追加</td>
<td><code>python scripts/manage_customer.py add-email acme-corp tanaka@gmail.com</code></td>
</tr>
<tr>
<td><code>remove-domain</code></td>
<td>ドメインを削除</td>
<td><code>python scripts/manage_customer.py remove-domain acme-corp acme.co.jp</code></td>
</tr>
<tr>
<td><code>remove-email</code></td>
<td>メールを削除</td>
<td><code>python scripts/manage_customer.py remove-email acme-corp tanaka@gmail.com</code></td>
</tr>
<tr>
<td><code>add-user</code></td>
<td>手動紐付け</td>
<td><code>python scripts/manage_customer.py add-user acme-corp yamada@acme.co.jp</code></td>
</tr>
</tbody>
</table>
<h3 id="クイックスタート新規顧客の追加">クイックスタート（新規顧客の追加）<a class="header-link" href="#クイックスタート新規顧客の追加" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">cd backend

# 1. 顧客を作成
python scripts/manage_customer.py add acme-corp &quot;株式会社ACME&quot;

# 2. メールドメイン（@以降）を登録（社員全員が自動振り分け）
python scripts/manage_customer.py add-domain acme-corp acme.co.jp

# 3. 確認
python scripts/manage_customer.py show acme-corp
</code></pre>

<p><strong>これだけで @acme.co.jp のユーザーは全員自動で振り分けられます！</strong></p>
<h3 id="自動振り分けの仕組み">自動振り分けの仕組み<a class="header-link" href="#自動振り分けの仕組み" title="Permanent link">&para;</a></h3>
<div class="tip-box">
<h3>✨ 自動振り分け</h3>
<p><strong>【従来の方法】400人の会社を登録する場合</strong><br>
→ 400回 add-user コマンドを実行... 大変！</p>
<p><strong>【自動振り分け】</strong><br>
→ 1回 add-domain を実行するだけ！<br>
→ @acme.co.jp のユーザーは全員自動で振り分け</p>
<p><strong>メモ:</strong> ここでいう「ドメイン」は、メールアドレスの@以降の部分（メールドメイン）です。URLドメインではありません。</p>
<table>
<tr><th>方法</th><th>コマンド</th><th>用途</th></tr>
<tr><td>メールドメイン登録</td><td>add-domain</td><td>社員全員を一括登録（@acme.co.jpなど）</td></tr>
<tr><td>個別メール登録</td><td>add-email</td><td>業務委託者を個別登録（外部メール）</td></tr>
<tr><td>手動紐付け</td><td>add-user</td><td>自動振り分けを使わない特殊ケース</td></tr>
</table>
</div>

<h3 id="出力例">出力例<a class="header-link" href="#出力例" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">$ python scripts/manage_customer.py show acme-corp

=== 株式会社ACME ===

  顧客ID: acme-corp
  作成日: 2024-01-15

  --- 自動振り分け設定 ---
  許可ドメイン:
    @acme.co.jp
  許可メール（個別）:
    tanaka@gmail.com

  --- 所属ユーザー ---
    yamada@acme.co.jp （自動）
    sato@acme.co.jp （自動）
    tanaka@gmail.com （自動）

  ユーザー数: 3人
</code></pre>

<hr />
<h2 id="よく使うコマンド">よく使うコマンド<a class="header-link" href="#よく使うコマンド" title="Permanent link">&para;</a></h2>
<h3 id="cdchange-directory">cd（Change Directory）<a class="header-link" href="#cdchange-directory" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">cd src/backend
</code></pre>

<p><strong>意味</strong>: 「backendフォルダに移動する」</p>
<div class="info-box">
<h3>📁 cdコマンド</h3>
<pre>
【イメージ】
あなたは今「GCP」という部屋にいます
    ↓
「cd src/backend」で「backend」という部屋に移動
    ↓
今は「GCP/backend」の部屋にいます
</pre>
</div>

<p><strong>よく使うパターン</strong>:</p>
<pre class="codehilite"><code class="language-bash">cd backend          # backendフォルダに入る
cd ..           # 一つ上のフォルダに戻る
cd ~            # ホームフォルダに戻る
</code></pre>

<hr />
<h3 id="lslist">ls（List）<a class="header-link" href="#lslist" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">ls
</code></pre>

<p><strong>意味</strong>: 「今いるフォルダの中身を表示する」</p>
<pre class="codehilite"><code>【実行例】
$ ls
README.md  backend/  frontend/  learning/
</code></pre>

<p><strong>オプション</strong>:</p>
<pre class="codehilite"><code class="language-bash">ls -la    # 隠しファイルも含めて詳細表示
</code></pre>

<hr />
<h3 id="pip-install">pip install<a class="header-link" href="#pip-install" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">pip install -r requirements.txt
</code></pre>

<p><strong>分解して理解</strong>:</p>
<table>
<thead>
<tr>
<th>部分</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pip</code></td>
<td>Pythonのパッケージ管理ツール</td>
</tr>
<tr>
<td><code>install</code></td>
<td>インストールする</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>ファイルから読み込む（-r = read）</td>
</tr>
<tr>
<td><code>requirements.txt</code></td>
<td>インストールするパッケージ一覧が書かれたファイル</td>
</tr>
</tbody>
</table>
<p><strong>何が起きる？</strong></p>
<pre class="codehilite"><code>requirements.txt の中身:
  flask==3.0.0
  firebase-admin==6.2.0
  langchain==0.1.0
  ...

これらのパッケージがインターネットからダウンロードされて
あなたのパソコンにインストールされます
</code></pre>

<p><strong>イメージ</strong>:</p>
<pre class="codehilite"><code>pip install = アプリストアからアプリをインストール
requirements.txt = 買い物リスト
</code></pre>

<hr />
<h3 id="npm-install">npm install<a class="header-link" href="#npm-install" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">npm install
</code></pre>

<p><strong>意味</strong>: 「package.jsonに書かれたパッケージをインストール」</p>
<table>
<thead>
<tr>
<th>用語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>npm</code></td>
<td>Node.jsのパッケージ管理ツール（Node Package Manager）</td>
</tr>
<tr>
<td><code>install</code></td>
<td>インストールする</td>
</tr>
<tr>
<td><code>package.json</code></td>
<td>必要なパッケージ一覧（自動で読み込まれる）</td>
</tr>
</tbody>
</table>
<p><strong>pip と npm の違い</strong>:</p>
<pre class="codehilite"><code>pip     → Python用
npm     → JavaScript/TypeScript用
</code></pre>

<hr />
<h3 id="functions-framework">functions-framework<a class="header-link" href="#functions-framework" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">functions-framework --target=main --port=8080
</code></pre>

<p><strong>分解して理解</strong>:</p>
<table>
<thead>
<tr>
<th>部分</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>functions-framework</code></td>
<td>Cloud Functionsをローカルで動かすツール</td>
</tr>
<tr>
<td><code>--target=main</code></td>
<td>main という関数を実行する</td>
</tr>
<tr>
<td><code>--port=8080</code></td>
<td>ポート8080で待ち受ける</td>
</tr>
</tbody>
</table>
<p><strong>何が起きる？</strong></p>
<pre class="codehilite"><code>1. あなたのPythonコード（main.py）が読み込まれる
2. main という関数がサーバーとして起動
3. http://localhost:8080 でアクセス可能になる
</code></pre>

<div class="info-box">
<h3>🔌 ポートとは？</h3>
<pre>
ポート = マンションの部屋番号

http://localhost:8080
  └── localhost = あなたのパソコン
  └── 8080 = 8080号室

別のアプリは別の部屋番号（ポート）を使う
</pre>
</div>

<hr />
<h3 id="npm-run-dev">npm run dev<a class="header-link" href="#npm-run-dev" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">npm run dev
</code></pre>

<p><strong>意味</strong>: 「package.jsonのscripts.devを実行」</p>
<pre class="codehilite"><code class="language-json">// package.json の中身（抜粋）
{
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;vite&quot;,           ← npm run dev で実行される
    &quot;build&quot;: &quot;vite build&quot;,   ← npm run build で実行される
  }
}
</code></pre>

<p><strong>何が起きる？</strong></p>
<pre class="codehilite"><code>1. Vite（開発サーバー）が起動
2. Reactアプリがコンパイルされる
3. http://localhost:5173 でアクセス可能になる
4. コードを変更すると自動で画面が更新される（ホットリロード）
</code></pre>

<hr />
<h2 id="ローカル開発の全体像">ローカル開発の全体像<a class="header-link" href="#ローカル開発の全体像" title="Permanent link">&para;</a></h2>
<div class="flow-box">
<h3>🔄 ローカル開発フロー</h3>
<pre>
【ターミナル1】                【ターミナル2】
cd backend                         cd frontend
pip install -r requirements.txt    npm install
functions-framework ...        npm run dev
    ↓                              ↓
バックエンド起動                フロントエンド起動
http://localhost:8080          http://localhost:5173
    ↑                              │
    └──────── API呼び出し ─────────┘

【ブラウザ】
http://localhost:5173 を開く
    ↓
Reactの画面が表示される
    ↓
チャット送信すると localhost:8080 にAPIリクエスト
    ↓
AIが返答
</pre>
</div>

<hr />
<h2 id="よくあるエラーと対処">よくあるエラーと対処<a class="header-link" href="#よくあるエラーと対処" title="Permanent link">&para;</a></h2>
<h3 id="command-not-found">「command not found」<a class="header-link" href="#command-not-found" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">$ pip install ...
zsh: command not found: pip
</code></pre>

<p><strong>原因</strong>: pipがインストールされていない、またはパスが通っていない</p>
<p><strong>対処</strong>:</p>
<pre class="codehilite"><code class="language-bash"># Macの場合
pip3 install ...    # pip の代わりに pip3 を使う

# または Python経由で
python3 -m pip install ...
</code></pre>

<hr />
<h3 id="eaddrinuse-address-already-in-use">「EADDRINUSE: address already in use」<a class="header-link" href="#eaddrinuse-address-already-in-use" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">Error: EADDRINUSE: address already in use :::8080
</code></pre>

<p><strong>原因</strong>: ポート8080が既に使われている</p>
<p><strong>対処</strong>:</p>
<pre class="codehilite"><code class="language-bash"># 使っているプロセスを探す
lsof -i :8080

# 見つかったプロセスを終了（PID番号を指定）
kill -9 12345
</code></pre>

<hr />
<h3 id="modulenotfounderror">「ModuleNotFoundError」<a class="header-link" href="#modulenotfounderror" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code class="language-bash">ModuleNotFoundError: No module named 'flask'
</code></pre>

<p><strong>原因</strong>: パッケージがインストールされていない</p>
<p><strong>対処</strong>:</p>
<pre class="codehilite"><code class="language-bash">pip install -r requirements.txt
</code></pre>

<hr />
<h2 id="まとめ">まとめ<a class="header-link" href="#まとめ" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>コマンド</th>
<th>一言で言うと</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cd フォルダ名</code></td>
<td>フォルダ移動</td>
</tr>
<tr>
<td><code>ls</code></td>
<td>中身を見る</td>
</tr>
<tr>
<td><code>pip install -r requirements.txt</code></td>
<td>Python用パッケージをインストール</td>
</tr>
<tr>
<td><code>npm install</code></td>
<td>JavaScript用パッケージをインストール</td>
</tr>
<tr>
<td><code>functions-framework --target=main --port=8080</code></td>
<td>バックエンドサーバー起動</td>
</tr>
<tr>
<td><code>npm run dev</code></td>
<td>フロントエンドサーバー起動</td>
</tr>
</tbody>
</table>
<p><strong>最初は意味がわからなくても大丈夫！</strong><br />
何度も使っていると自然と覚えます。</p>
      </article>
      <footer class="footer">
        GCP AI Agent 設計資料 | Built with Python & Markdown
      </footer>
    </main>
  </div>

  <script>
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(e) {
      const sidebar = document.getElementById('sidebar');
      const toggle = document.querySelector('.menu-toggle');
      if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
        sidebar.classList.remove('open');
      }
    });
  </script>
</body>
</html>