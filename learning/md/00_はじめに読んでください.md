# 学習ガイド - 1〜2日で理解する

このフォルダは、**GASを少し触ったことがある新卒エンジニア**が
このシステムを**1〜2日で理解して作業できる**ための勉強資料です。

---

## このシステムって何？

```
┌─────────────────────────────────────────────────────────────┐
│                    AIチャットシステム                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  できること:                                                 │
│  ・Googleアカウントでログイン                                 │
│  ・AIと会話（ChatGPTのような体験）                            │
│  ・会話履歴の保存                                            │
│  ・複数の会社で使える（マルチテナント）                        │
│                                                             │
│  使っている技術:                                             │
│  ・フロントエンド: React + TypeScript                        │
│  ・バックエンド: Python + Flask                              │
│  ・AI: Google Vertex AI (Gemini)                            │
│  ・データベース: Firestore                                   │
│  ・認証: Firebase Authentication                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 学習の進め方：フロー別学習

**従来の学習**と**この資料の学習**の違い：

```
【従来】ファイル単位で学ぶ
  main.py を読む → auth.py を読む → agent.py を読む
  ❌ 「で、これらがどう繋がるの？」がわからない

【この資料】フロー単位で学ぶ
  「チャットを送信したら何が起きるか」を追う
  ✅ ファイル間の繋がりがわかる！
  ✅ 「なぜこのファイルがあるのか」がわかる！
```

---

## 1〜2日 クイックスタート

### Day 1: 動かして理解する（4〜6時間）

```
午前（2〜3時間）: 環境構築
─────────────────────────────────────────────
│
├─→ まず読む: FLOW_03_セットアップの流れ.md
│
│   やること:
│   ✅ GCPプロジェクト作成
│   ✅ Firebase設定
│   ✅ 環境変数設定
│   ✅ バックエンド起動
│   ✅ フロントエンド起動
│   ✅ ログインしてチャット ← ここまでが目標！
│
└─→ 成功の確認: ブラウザでチャットできる

午後（2〜3時間）: コードの流れを理解
─────────────────────────────────────────────
│
├─→ 読む: FLOW_01_チャット送信の流れ.md
│   ・ボタンを押してから返答が来るまでの全コード
│   ・6つのファイルの繋がりを理解
│
└─→ 読む: FLOW_02_ログインの流れ.md
     ・ログインボタンから認証完了までの流れ
     ・Custom Claims（顧客紐付け）の仕組み
```

### Day 2: 深く理解する（4〜6時間）

```
午前（2〜3時間）: 基礎知識の補強
─────────────────────────────────────────────
│
├─→ 06_コマンド解説.md（ターミナルコマンドの意味）
│   pip, npm, functions-framework って何？
│
└─→ 07_ファイル形式と設定ファイル.md
     .ts, .tsx, package.json って何？

午後（2〜3時間）: 個別ファイルの理解
─────────────────────────────────────────────
│
├─→ 01_全体像.md（アーキテクチャ図）
│
├─→ 05_顧客管理の仕組み.md（マルチテナント）
│
└─→ 実際のコードを開いてみる
     ・FLOW_01で登場したファイルを開く
     ・ドキュメントのコードと照らし合わせる
```

---

## 優先度付きドキュメント一覧

### 最優先（★★★）- 必ず読む

| ファイル | 内容 | 読了時間 |
|----------|------|----------|
| `FLOW_03_セットアップの流れ.md` | 環境構築の手順 | 2時間 |
| `FLOW_01_チャット送信の流れ.md` | チャット処理の全体像 | 45分 |
| `FLOW_02_ログインの流れ.md` | 認証の仕組み | 30分 |

### 重要（★★）- できれば読む

| ファイル | 内容 | いつ読むか |
|----------|------|------------|
| `06_コマンド解説.md` | ターミナルコマンド | コマンドがわからない時 |
| `07_ファイル形式と設定ファイル.md` | ファイル形式 | .ts等がわからない時 |
| `01_全体像.md` | アーキテクチャ | 全体を俯瞰したい時 |
| `05_顧客管理の仕組み.md` | マルチテナント | 顧客追加が必要な時 |

### 参考（★）- 必要に応じて

| ファイル | 内容 |
|----------|------|
| `02_バックエンド解説.md` | Pythonコードの詳細解説 |
| `03_フロントエンド解説.md` | React/TypeScriptの詳細解説 |
| `04_動かしてみよう.md` | 簡易版の起動手順 |

---

## GAS経験者向け: この技術って何？

| この資料で出てくる技術 | GASで言うと |
|----------------------|------------|
| TypeScript | GASのJavaScript（ただし型がある） |
| React | スプレッドシートのUI部分を作る仕組み |
| Python | GASのスクリプト部分（サーバー側で動く） |
| Firebase Auth | Googleアカウントでのログイン |
| Firestore | スプレッドシートの代わりのデータベース |
| Vertex AI | AIに質問する機能 |
| npm / pip | GASの「ライブラリを追加」みたいなもの |

---

## ファイル構成クイックリファレンス

### フロントエンド（ブラウザで動く部分）

```
frontend/src/
├── App.tsx ─────────── 画面の入口
├── hooks/
│   ├── useAuth.ts ──── ログイン処理
│   └── useChat.ts ──── チャット処理
└── services/
    ├── firebase.ts ─── Firebase接続
    └── api.ts ──────── サーバーとの通信
```

### バックエンド（サーバーで動く部分）

```
backend/src/
├── main.py ─────────── APIの入口
├── common/
│   ├── auth.py ─────── 認証処理
│   └── config.py ───── 設定読み込み
└── agents/
    └── sample_agent/
        └── agent.py ── AI処理
```

---

## よくあるエラーと対処法

| エラー | 原因 | どこを見る |
|--------|------|-----------|
| CORSエラー | 設定ミス | FLOW_03 → 環境変数 |
| 認証エラー | トークン期限切れ | 再ログイン |
| 顧客に紐付けされていません | 未登録 | FLOW_02 → 顧客紐付け |
| Module not found | 依存関係なし | `pip install` / `npm install` |
| コマンドがわからない | - | 06_コマンド解説.md |
| ファイル形式がわからない | - | 07_ファイル形式.md |

---

## 学習リソース

| 種類 | 場所 | 用途 |
|------|------|------|
| Markdown | `learning/md/` | テキストで読む解説 |
| Google Colab | `learning/colab/` | 手を動かして学ぶ |
| GitHub Pages | 自動生成 | ブラウザできれいに読む |

### Google Colab の使い方

1. [Google Colab](https://colab.research.google.com/) を開く
2. 「ファイル」→「ノートブックをアップロード」
3. `learning/colab/` の `.ipynb` ファイルを選択
4. セルを上から順に実行（Shift + Enter）

---

## 学習の目標

この勉強を終えたら、以下ができるようになります：

### レベル1: 理解できる
- [ ] 「チャットを送信したら何が起きるか」を説明できる
- [ ] 各ファイルの役割を説明できる
- [ ] エラーが出た時に、どこを見ればいいかわかる

### レベル2: 修正できる
- [ ] AIのシステムプロンプトを変更できる
- [ ] 新しいユーザーを追加できる
- [ ] 環境変数を変更できる

### レベル3: 運用できる
- [ ] 新しい顧客を追加できる
- [ ] トラブルシューティングができる
- [ ] ログを見て問題を特定できる

---

## 困ったときの連絡先

1. まず該当するFLOWドキュメントを確認
2. それでも解決しない場合は、以下を伝えて質問：
   - どのファイルの何行目か
   - 何をしようとしたか
   - どんなエラーが出たか（全文）

---

さあ、**FLOW_03_セットアップの流れ.md** から始めましょう！
