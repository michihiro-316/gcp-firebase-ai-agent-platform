# ファイル形式と設定ファイル解説

プロジェクト内には様々なファイル形式があります。
「これは何？」と思ったらこのページを見てください。

---

## ファイル拡張子一覧

### プログラムファイル

| 拡張子 | 言語/用途 | 説明 |
|--------|----------|------|
| `.py` | Python | バックエンドのプログラム |
| `.ts` | TypeScript | 型付きJavaScript（ロジック部分） |
| `.tsx` | TypeScript + React | 画面のコンポーネント（UIを含む） |
| `.js` | JavaScript | 普通のJavaScript |
| `.jsx` | JavaScript + React | Reactコンポーネント |

### 設定ファイル

| 拡張子 | 用途 | 説明 |
|--------|------|------|
| `.json` | 設定ファイル | package.json, tsconfig.json など |
| `.yaml` / `.yml` | 設定ファイル | GitHub Actions など |
| `.env` | 環境変数 | APIキーなど秘密の情報 |
| `.md` | ドキュメント | Markdown形式の説明文書 |

### その他

| 拡張子 | 用途 | 説明 |
|--------|------|------|
| `.d.ts` | 型定義 | TypeScriptの型情報のみ |
| `.gitignore` | Git設定 | Gitで無視するファイル一覧 |
| `.ipynb` | Jupyter Notebook | Google Colabで開けるノートブック |

---

## .ts と .tsx の違い

```
.ts  = TypeScriptのコード（ロジック）
.tsx = TypeScript + JSX（UIを含む）
```

### .ts の例（useAuth.ts）

```typescript
// UIを含まない、ロジックだけのファイル
export function useAuth() {
  const [user, setUser] = useState(null);
  // ...
  return { user, login, logout };
}
```

### .tsx の例（App.tsx）

```tsx
// UIを含むファイル（HTMLっぽい部分がある）
function App() {
  return (
    <div>                          {/* ← これがJSX（HTMLっぽい構文） */}
      <h1>こんにちは</h1>
      <button onClick={handleClick}>クリック</button>
    </div>
  );
}
```

**見分け方**: ファイルの中に `<div>` や `<button>` のようなHTMLっぽいものがあれば `.tsx`

---

## 主要な設定ファイル解説

### package.json（フロントエンド）

```json
{
  "name": "frontend",           // プロジェクト名
  "version": "1.0.0",           // バージョン
  "scripts": {                  // 実行できるコマンド
    "dev": "vite",              // npm run dev で実行される
    "build": "vite build",      // npm run build で実行される
    "preview": "vite preview"
  },
  "dependencies": {             // 本番で必要なパッケージ
    "react": "^18.2.0",
    "firebase": "^10.7.0"
  },
  "devDependencies": {          // 開発時のみ必要なパッケージ
    "typescript": "^5.0.0",
    "vite": "^5.0.0"
  }
}
```

**よく使う場面**:
- `npm install` → dependencies と devDependencies をインストール
- `npm run dev` → scripts.dev を実行

---

### tsconfig.json（TypeScript設定）

```json
{
  "compilerOptions": {
    "target": "ES2020",         // 出力するJavaScriptのバージョン
    "module": "ESNext",         // モジュール形式
    "strict": true,             // 厳格な型チェック
    "jsx": "react-jsx"          // JSXの変換方法
  },
  "include": ["src"]            // コンパイル対象のフォルダ
}
```

**初心者向け**: 基本的に触る必要なし。エラーが出たら確認。

---

### vite.config.ts（Vite設定）

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],           // Reactプラグインを使用
  server: {
    port: 5173                  // 開発サーバーのポート番号
  }
})
```

**初心者向け**: 基本的に触る必要なし。

---

### firebase.json（Firebase設定）

```json
{
  "hosting": {
    "public": "dist",           // デプロイするフォルダ
    "ignore": ["firebase.json"],
    "rewrites": [
      {
        "source": "**",         // すべてのURLを
        "destination": "/index.html"  // index.htmlに転送（SPA用）
      }
    ]
  }
}
```

**役割**: Firebase Hostingにデプロイするときの設定

---

### requirements.txt（Python依存関係）

```text
flask==3.0.0
firebase-admin==6.2.0
langchain==0.1.0
langchain-google-vertexai==0.0.6
langgraph==0.0.20
functions-framework==3.5.0
python-dotenv==1.0.0
flask-cors==4.0.0
```

**見方**: `パッケージ名==バージョン`

**使い方**: `pip install -r requirements.txt` で全部インストール

---

### .env（環境変数）

```bash
# バックエンド用
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_APPLICATION_CREDENTIALS=./service-account.json
ALLOWED_ORIGINS=http://localhost:5173

# フロントエンド用
VITE_FIREBASE_API_KEY=AIzaSy...
VITE_FIREBASE_AUTH_DOMAIN=xxx.firebaseapp.com
VITE_API_BASE_URL=http://localhost:8080
```

**重要**:
- `.env` は `.gitignore` に入れる（Gitにアップしない）
- APIキーなどの秘密情報を書く場所

---

### .gitignore（Git無視設定）

```text
# Node.js
node_modules/
dist/

# Python
__pycache__/
*.pyc
venv/

# 環境変数（秘密情報）
.env
*.env.local

# 認証情報
service-account.json
```

**役割**: ここに書いたファイルはGitで管理されない

---

## プロジェクト内の重要ファイル一覧

### フロントエンド

```
frontend/
├── package.json          ← 依存関係とスクリプト
├── tsconfig.json         ← TypeScript設定
├── vite.config.ts        ← Vite設定
├── firebase.json         ← Firebase Hosting設定
├── .env                  ← 環境変数（秘密）
└── src/
    ├── main.tsx          ← エントリーポイント
    ├── App.tsx           ← メインコンポーネント
    ├── vite-env.d.ts     ← Viteの型定義
    ├── components/       ← UIコンポーネント
    │   ├── ChatScreen.tsx
    │   └── LoginScreen.tsx
    ├── hooks/            ← カスタムフック
    │   ├── useAuth.ts
    │   └── useChat.ts
    └── services/         ← 外部サービス連携
        ├── firebase.ts
        └── api.ts
```

### バックエンド

```
backend/
├── requirements.txt      ← Python依存関係
├── .env                  ← 環境変数（秘密）
├── service-account.json  ← GCP認証情報（秘密）
├── scripts/
│   └── manage_customer.py ← 顧客管理スクリプト
└── src/
    ├── main.py           ← エントリーポイント
    ├── common/           ← 共通モジュール
    │   ├── __init__.py   ← パッケージ化
    │   ├── auth.py
    │   ├── config.py
    │   └── ...
    └── agents/           ← AIエージェント
        ├── __init__.py
        ├── base_agent.py
        └── sample_agent/
            ├── __init__.py
            ├── agent.py
            └── state.py
```

---

## __init__.py とは？

Pythonのフォルダを「パッケージ」として認識させるためのファイル。

```python
# agents/__init__.py
from .sample_agent import SampleAgent
```

これがあると:
```python
from agents import SampleAgent  # このように書ける
```

**初心者向け**: 空の `__init__.py` でもOK。フォルダに置くだけで意味がある。

---

## vite-env.d.ts とは？

```typescript
/// <reference types="vite/client" />
```

**役割**: Viteが提供する機能の型定義を読み込む

例えば `import.meta.env.VITE_API_URL` のような環境変数アクセスの型を認識させる。

**初心者向け**: 触る必要なし。Viteが自動生成。

---

## まとめ

| 見かけたら | 何をする |
|-----------|----------|
| `.py` | Pythonコードを読む |
| `.ts` | TypeScriptのロジックを読む |
| `.tsx` | ReactのUIコンポーネントを読む |
| `package.json` | 依存関係を確認、`npm run xxx` の定義を確認 |
| `requirements.txt` | Python依存関係を確認 |
| `.env` | 環境変数を設定（秘密情報） |
| `__init__.py` | 「このフォルダはパッケージ」という印 |
| `tsconfig.json` | TypeScript設定（基本触らない） |
